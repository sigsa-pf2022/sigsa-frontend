{"version":3,"file":"src_app_views_login_login_module_ts.js","mappings":"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","sources":["./src/app/components/recovery-password-modal/recovery-password-modal.component.ts","./src/app/components/send-verification-email-modal/send-verification-email-modal.component.ts","./src/app/components/shared-components.module.ts","./src/app/views/login/login.module.ts","./src/app/views/login/login.page.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { ModalController, ToastController } from '@ionic/angular';\nimport { TranslateService } from '@ngx-translate/core';\nimport { AuthenticationService } from 'src/app/services/authentication/authentication.service';\n\n@Component({\n  selector: 'app-recovery-password-modal',\n  template: `<div class=\"modal-content\">\n    <form [formGroup]=\"this.form\">\n      <div class=\"body\">\n        <ion-title>Recuperación de contraseña</ion-title>\n        <ion-label\n          >Le enviaremos un email para que pueda recuerar su contraseña a la\n          direccion ingresada debajo</ion-label\n        >\n        <ion-input\n          class=\"ui-form-input\"\n          placeholder=\"Email\"\n          formControlName=\"email\"\n        ></ion-input>\n        <div class=\"body__actions\">\n          <ion-button (click)=\"close()\">Cerrar</ion-button>\n          <ion-button (click)=\"send()\" [disabled]=\"!this.form.valid\"\n            >Enviar</ion-button\n          >\n        </div>\n      </div>\n    </form>\n  </div>`,\n  styleUrls: ['./recovery-password-modal.component.scss'],\n})\nexport class RecoveryPasswordModalComponent implements OnInit {\n  form = this.fb.group({\n    email: ['', [Validators.required, Validators.email]],\n  });\n  constructor(\n    private modalController: ModalController,\n    private fb: FormBuilder,\n    private auth: AuthenticationService,\n    private toast: ToastController,\n    private translate: TranslateService\n  ) {}\n\n  ngOnInit() {}\n\n  close() {\n    return this.modalController.dismiss();\n  }\n\n  async send() {\n    await this.auth\n      .sendPasswordResetEmail(this.form.value)\n      .then((res) => {\n        this.showMessage('success', 'success');\n        this.close();\n      })\n      .catch((err) => {\n        this.showMessage('danger', err);\n      });\n  }\n\n  async showMessage(color: string, code: string) {\n    const toast = await this.toast.create({\n      message: this.translate.instant(`login.recovery-password.${code}`),\n      duration: 5000,\n      color,\n    });\n    await toast.present();\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ModalController } from '@ionic/angular';\n\n@Component({\n  selector: 'app-send-verification-email-modal',\n  template: `<div class=\"modal-content\">\n    <div class=\"body\">\n      <ion-title>¡Atención!</ion-title>\n      <ion-label\n        >La cuenta debe confirmar el correo para continuar. Revise la casilla de\n        correo o solicite un reenvío</ion-label\n      >\n      <div class=\"body__actions\">\n        <ion-button (click)=\"close()\">Cerrar</ion-button>\n        <ion-button (click)=\"resend()\">Reenviar</ion-button>\n      </div>\n    </div>\n  </div>`,\n  styleUrls: ['./send-verification-email-modal.component.scss'],\n})\nexport class SendVerificationEmailModalComponent implements OnInit {\n  constructor(private modalController: ModalController) {}\n\n  ngOnInit() {}\n\n  close() {\n    return this.modalController.dismiss();\n  }\n\n  resend() {\n    return this.modalController.dismiss('resend');\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { SendVerificationEmailModalComponent } from './send-verification-email-modal/send-verification-email-modal.component';\nimport { SuccessCreationAcountComponent } from './success-creation-acount/success-creation-acount.component';\nimport { RecoveryPasswordModalComponent } from './recovery-password-modal/recovery-password-modal.component';\n@NgModule({\n  declarations: [SendVerificationEmailModalComponent, SuccessCreationAcountComponent,RecoveryPasswordModalComponent],\n  imports: [CommonModule, IonicModule, FormsModule, ReactiveFormsModule],\n  exports: [SendVerificationEmailModalComponent, SuccessCreationAcountComponent,RecoveryPasswordModalComponent],\n})\nexport class SharedComponentsModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule, Routes } from '@angular/router';\nimport { IonicModule } from '@ionic/angular';\nimport { LoginPage } from './login.page';\nimport { SharedComponentsModule } from 'src/app/components/shared-components.module';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginPage,\n  },\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    SharedComponentsModule\n  ],\n  declarations: [LoginPage],\n})\nexport class LoginPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport {\n  ModalController,\n  NavController,\n  ToastController,\n} from '@ionic/angular';\nimport { TranslateService } from '@ngx-translate/core';\nimport { RecoveryPasswordModalComponent } from 'src/app/components/recovery-password-modal/recovery-password-modal.component';\nimport { SendVerificationEmailModalComponent } from 'src/app/components/send-verification-email-modal/send-verification-email-modal.component';\nimport { AuthenticationService } from 'src/app/services/authentication/authentication.service';\n\n@Component({\n  selector: 'app-login',\n  template: `\n    <ion-header class=\"ui-background__light\">\n      <ion-toolbar class=\"ui-toolbar__transparent\">\n        <ion-buttons slot=\"start\">\n          <ion-back-button></ion-back-button>\n        </ion-buttons>\n      </ion-toolbar>\n    </ion-header>\n\n    <ion-content class=\"login\">\n      <div class=\"login__logo ui-background__light\">\n        <ion-img\n          class=\"ui-logo__small\"\n          src=\"/assets/images/logos/logo-with-title.png\"\n        ></ion-img>\n      </div>\n      <div class=\"login__content ui-background__light\">\n        <form\n          class=\"login__content__form\"\n          [formGroup]=\"this.loginForm\"\n          (submit)=\"onSubmit()\"\n        >\n          <ion-text\n            class=\"login__content__form__title ui-font-title\"\n            color=\"complementary\"\n            >Bienvenido</ion-text\n          >\n          <div class=\"login__content__form__items\">\n            <ion-input\n              class=\"ui-form-input\"\n              formControlName=\"email\"\n              placeholder=\"Email\"\n            ></ion-input>\n            <ion-input\n              class=\"ui-form-input\"\n              formControlName=\"password\"\n              placeholder=\"Contraseña\"\n              type=\"password\"\n            ></ion-input>\n            <ion-text\n              class=\"login__content__form__items__forgot-password ui-font-text\"\n              color=\"complementary\"\n              (click)=\"openRecoveryPassword()\"\n              >¿Olvido su contraseña?</ion-text\n            >\n          </div>\n          <div class=\"login__content__form__actions\">\n            <ion-button\n              class=\"ui-button\"\n              type=\"submit\"\n              color=\"primary\"\n              expand=\"block\"\n              [disabled]=\"!this.loginForm.valid\"\n            >\n              Ingresar\n            </ion-button>\n            <div class=\"login__content__form__actions__secondary\">\n              <ion-text class=\"ui-font-text\" color=\"medium\"\n                >No tiene una cuenta?</ion-text\n              >\n              <ion-text\n                (click)=\"goToRegister()\"\n                class=\"ui-font-text\"\n                color=\"complementary\"\n              >\n                Registrese</ion-text\n              >\n            </div>\n          </div>\n        </form>\n      </div>\n    </ion-content>\n  `,\n  styleUrls: ['./login.page.scss'],\n})\nexport class LoginPage implements OnInit {\n  loginForm = this.fb.group({\n    email: [\n      null,\n      [Validators.compose([Validators.email, Validators.required])],\n    ],\n    password: [\n      null,\n      [Validators.compose([Validators.minLength(6), Validators.required])],\n    ],\n  });\n  constructor(\n    private fb: FormBuilder,\n    private navController: NavController,\n    private auth: AuthenticationService,\n    private modalController: ModalController,\n    private toast: ToastController,\n    private translate: TranslateService\n  ) {}\n\n  ngOnInit() {}\n\n  async onSubmit() {\n    await this.auth\n      .signIn(this.loginForm.value)\n      .then(async (user) => {\n        if (!user.emailVerified) {\n          this.sendVerificationEmailModal();\n        }\n      })\n      .catch((error) => {\n        this.showError(error);\n      });\n  }\n\n  goHome() {\n    this.navController.navigateRoot(['tabs/home']);\n  }\n\n  async sendVerificationEmailModal() {\n    const modal = await this.modalController.create({\n      component: SendVerificationEmailModalComponent,\n      cssClass: 'modal',\n    });\n    await modal.present();\n    const { data } = await modal.onWillDismiss();\n    if (data === 'resend') {\n      await this.auth.sendVerificationMail();\n    }\n    await this.auth.signOut();\n  }\n\n  async openRecoveryPassword() {\n    const modal = await this.modalController.create({\n      component: RecoveryPasswordModalComponent,\n      cssClass: 'modal',\n    });\n    await modal.present();\n  }\n\n  goToRegister() {\n    this.navController.navigateForward(['/register/personal-data']);\n  }\n\n  async showError(code: string) {\n    const toast = await this.toast.create({\n      message: this.translate.instant(`login.errors.${code}`),\n      duration: 5000,\n      color: 'danger',\n    });\n    await toast.present();\n  }\n}\n"],"names":[],"sourceRoot":"webpack:///"}